{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rache/Desktop/Hackathons/LockedIn/lib/db.ts"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI;\r\n\r\nif (!MONGODB_URI) {\r\n    throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\r\n}\r\n\r\ninterface MongooseCache {\r\n    conn: typeof mongoose | null;\r\n    promise: Promise<typeof mongoose> | null;\r\n}\r\n\r\ndeclare global {\r\n    var mongoose: MongooseCache;\r\n}\r\n\r\nlet cached: MongooseCache = global.mongoose || { conn: null, promise: null };\r\n\r\nif (!global.mongoose) {\r\n    global.mongoose = cached;\r\n}\r\n\r\nasync function connectDB(): Promise<typeof mongoose> {\r\n    if (cached.conn) {\r\n        return cached.conn;\r\n    }\r\n\r\n    if (!cached.promise) {\r\n        const opts = {\r\n            bufferCommands: false,\r\n        };\r\n\r\n        cached.promise = mongoose.connect(MONGODB_URI!, opts).then((mongoose) => {\r\n            return mongoose;\r\n        });\r\n    }\r\n\r\n    try {\r\n        cached.conn = await cached.promise;\r\n    } catch (e) {\r\n        cached.promise = null;\r\n        throw e;\r\n    }\r\n\r\n    return cached.conn;\r\n}\r\n\r\nexport default connectDB;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IACd,MAAM,IAAI,MAAM;AACpB;AAWA,IAAI,SAAwB,OAAO,QAAQ,IAAI;IAAE,MAAM;IAAM,SAAS;AAAK;AAE3E,IAAI,CAAC,OAAO,QAAQ,EAAE;IAClB,OAAO,QAAQ,GAAG;AACtB;AAEA,eAAe;IACX,IAAI,OAAO,IAAI,EAAE;QACb,OAAO,OAAO,IAAI;IACtB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACjB,MAAM,OAAO;YACT,gBAAgB;QACpB;QAEA,OAAO,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,aAAc,MAAM,IAAI,CAAC,CAAC;YACxD,OAAO;QACX;IACJ;IAEA,IAAI;QACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACtC,EAAE,OAAO,GAAG;QACR,OAAO,OAAO,GAAG;QACjB,MAAM;IACV;IAEA,OAAO,OAAO,IAAI;AACtB;uCAEe"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rache/Desktop/Hackathons/LockedIn/models/Match.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from 'mongoose';\r\n\r\nexport interface IMatch extends Document {\r\n    userA: mongoose.Types.ObjectId;\r\n    userB: mongoose.Types.ObjectId;\r\n    createdAt: Date;\r\n    status: 'active' | 'expired' | 'completed';\r\n    permanentlyBlocked: boolean;\r\n}\r\n\r\nconst MatchSchema = new Schema<IMatch>({\r\n    userA: {\r\n        type: Schema.Types.ObjectId,\r\n        ref: 'User',\r\n        required: true,\r\n        index: true\r\n    },\r\n    userB: {\r\n        type: Schema.Types.ObjectId,\r\n        ref: 'User',\r\n        required: true,\r\n        index: true\r\n    },\r\n    createdAt: {\r\n        type: Date,\r\n        default: Date.now,\r\n        required: true\r\n    },\r\n    status: {\r\n        type: String,\r\n        enum: ['active', 'expired', 'completed'],\r\n        default: 'active',\r\n        required: true\r\n    },\r\n    permanentlyBlocked: {\r\n        type: Boolean,\r\n        default: true,\r\n        required: true\r\n    }\r\n});\r\n\r\n// Compound indexes for efficient matching queries\r\nMatchSchema.index({ userA: 1, userB: 1 });\r\nMatchSchema.index({ userA: 1, status: 1 });\r\nMatchSchema.index({ userB: 1, status: 1 });\r\n\r\nconst Match: Model<IMatch> = mongoose.models.Match || mongoose.model<IMatch>('Match', MatchSchema);\r\n\r\nexport default Match;\r\n"],"names":[],"mappings":";;;;AAAA;;AAUA,MAAM,cAAc,IAAI,kKAAM,CAAS;IACnC,OAAO;QACH,MAAM,kKAAM,CAAC,KAAK,CAAC,QAAQ;QAC3B,KAAK;QACL,UAAU;QACV,OAAO;IACX;IACA,OAAO;QACH,MAAM,kKAAM,CAAC,KAAK,CAAC,QAAQ;QAC3B,KAAK;QACL,UAAU;QACV,OAAO;IACX;IACA,WAAW;QACP,MAAM;QACN,SAAS,KAAK,GAAG;QACjB,UAAU;IACd;IACA,QAAQ;QACJ,MAAM;QACN,MAAM;YAAC;YAAU;YAAW;SAAY;QACxC,SAAS;QACT,UAAU;IACd;IACA,oBAAoB;QAChB,MAAM;QACN,SAAS;QACT,UAAU;IACd;AACJ;AAEA,kDAAkD;AAClD,YAAY,KAAK,CAAC;IAAE,OAAO;IAAG,OAAO;AAAE;AACvC,YAAY,KAAK,CAAC;IAAE,OAAO;IAAG,QAAQ;AAAE;AACxC,YAAY,KAAK,CAAC;IAAE,OAAO;IAAG,QAAQ;AAAE;AAExC,MAAM,QAAuB,mKAAQ,CAAC,MAAM,CAAC,KAAK,IAAI,mKAAQ,CAAC,KAAK,CAAS,SAAS;uCAEvE"}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rache/Desktop/Hackathons/LockedIn/models/User.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from 'mongoose';\r\n\r\nexport const GENDER_OPTIONS = ['male', 'female', 'non-binary', 'other', 'prefer_not_to_say'] as const;\r\nexport const SEXUALITY_OPTIONS = ['heterosexual', 'gay', 'lesbian', 'bisexual', 'pansexual', 'asexual', 'other', 'prefer_not_to_say'] as const;\r\n\r\nexport type Gender = typeof GENDER_OPTIONS[number];\r\nexport type Sexuality = typeof SEXUALITY_OPTIONS[number];\r\n\r\nexport interface IUser extends Document {\r\n    email: string;\r\n    passwordHash: string;\r\n    firstName?: string;\r\n    lastName?: string;\r\n    age?: number;\r\n    gender?: Gender;\r\n    sexuality?: Sexuality;\r\n    avatar?: string;\r\n    homeAddress?: string;\r\n    locationCoordinates?: {\r\n        lat: number;\r\n        lng: number;\r\n    };\r\n    interests: string;\r\n    values: string;\r\n    mustHaves: string;\r\n    niceToHaves: string;\r\n    dealBreakers: string;\r\n    status: 'onboarding' | 'waiting_for_match' | 'matched';\r\n    createdAt: Date;\r\n}\r\n\r\nconst UserSchema = new Schema<IUser>({\r\n    email: {\r\n        type: String,\r\n        required: true,\r\n        unique: true,\r\n        lowercase: true,\r\n        trim: true,\r\n        index: true\r\n    },\r\n    passwordHash: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    firstName: {\r\n        type: String,\r\n        required: false\r\n    },\r\n    lastName: {\r\n        type: String,\r\n        required: false\r\n    },\r\n    age: {\r\n        type: Number,\r\n        required: false,\r\n        min: 18\r\n    },\r\n    avatar: {\r\n        type: String,\r\n        default: 'avatar1'\r\n    },\r\n    gender: {\r\n        type: String,\r\n        enum: GENDER_OPTIONS,\r\n        required: false\r\n    },\r\n    sexuality: {\r\n        type: String,\r\n        enum: SEXUALITY_OPTIONS,\r\n        required: false\r\n    },\r\n    homeAddress: {\r\n        type: String,\r\n        required: false\r\n    },\r\n    locationCoordinates: {\r\n        lat: {\r\n            type: Number,\r\n            required: false\r\n        },\r\n        lng: {\r\n            type: Number,\r\n            required: false\r\n        }\r\n    },\r\n    interests: {\r\n        type: String,\r\n        default: ''\r\n    },\r\n    values: {\r\n        type: String,\r\n        default: ''\r\n    },\r\n    mustHaves: {\r\n        type: String,\r\n        default: ''\r\n    },\r\n    niceToHaves: {\r\n        type: String,\r\n        default: ''\r\n    },\r\n    dealBreakers: {\r\n        type: String,\r\n        default: ''\r\n    },\r\n    status: {\r\n        type: String,\r\n        enum: ['onboarding', 'waiting_for_match', 'matched'],\r\n        default: 'onboarding',\r\n        required: true\r\n    },\r\n    createdAt: {\r\n        type: Date,\r\n        default: Date.now,\r\n        required: true\r\n    }\r\n});\r\n\r\n// Index for matching queries\r\nUserSchema.index({ status: 1 });\r\nUserSchema.index({ 'locationCoordinates.lat': 1, 'locationCoordinates.lng': 1 });\r\n\r\nconst User: Model<IUser> = mongoose.models.User || mongoose.model<IUser>('User', UserSchema);\r\n\r\nexport default User;\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,MAAM,iBAAiB;IAAC;IAAQ;IAAU;IAAc;IAAS;CAAoB;AACrF,MAAM,oBAAoB;IAAC;IAAgB;IAAO;IAAW;IAAY;IAAa;IAAW;IAAS;CAAoB;AA4BrI,MAAM,aAAa,IAAI,kKAAM,CAAQ;IACjC,OAAO;QACH,MAAM;QACN,UAAU;QACV,QAAQ;QACR,WAAW;QACX,MAAM;QACN,OAAO;IACX;IACA,cAAc;QACV,MAAM;QACN,UAAU;IACd;IACA,WAAW;QACP,MAAM;QACN,UAAU;IACd;IACA,UAAU;QACN,MAAM;QACN,UAAU;IACd;IACA,KAAK;QACD,MAAM;QACN,UAAU;QACV,KAAK;IACT;IACA,QAAQ;QACJ,MAAM;QACN,SAAS;IACb;IACA,QAAQ;QACJ,MAAM;QACN,MAAM;QACN,UAAU;IACd;IACA,WAAW;QACP,MAAM;QACN,MAAM;QACN,UAAU;IACd;IACA,aAAa;QACT,MAAM;QACN,UAAU;IACd;IACA,qBAAqB;QACjB,KAAK;YACD,MAAM;YACN,UAAU;QACd;QACA,KAAK;YACD,MAAM;YACN,UAAU;QACd;IACJ;IACA,WAAW;QACP,MAAM;QACN,SAAS;IACb;IACA,QAAQ;QACJ,MAAM;QACN,SAAS;IACb;IACA,WAAW;QACP,MAAM;QACN,SAAS;IACb;IACA,aAAa;QACT,MAAM;QACN,SAAS;IACb;IACA,cAAc;QACV,MAAM;QACN,SAAS;IACb;IACA,QAAQ;QACJ,MAAM;QACN,MAAM;YAAC;YAAc;YAAqB;SAAU;QACpD,SAAS;QACT,UAAU;IACd;IACA,WAAW;QACP,MAAM;QACN,SAAS,KAAK,GAAG;QACjB,UAAU;IACd;AACJ;AAEA,6BAA6B;AAC7B,WAAW,KAAK,CAAC;IAAE,QAAQ;AAAE;AAC7B,WAAW,KAAK,CAAC;IAAE,2BAA2B;IAAG,2BAA2B;AAAE;AAE9E,MAAM,OAAqB,mKAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,mKAAQ,CAAC,KAAK,CAAQ,QAAQ;uCAElE"}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rache/Desktop/Hackathons/LockedIn/app/api/match/active/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport connectDB from '@/lib/db';\r\nimport Match from '@/models/Match';\r\nimport User from '@/models/User';\r\n\r\nexport async function GET(req: Request) {\r\n    try {\r\n        await connectDB();\r\n        const userId = req.headers.get('x-user-id');\r\n\r\n        if (!userId) {\r\n            return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n        }\r\n\r\n        const match = await Match.findOne({\r\n            $or: [{ userA: userId }, { userB: userId }],\r\n            status: 'active'\r\n        });\r\n\r\n        if (!match) {\r\n            return NextResponse.json({ hasMatch: false });\r\n        }\r\n\r\n        const partnerId = match.userA.toString() === userId ? match.userB : match.userA;\r\n        const partner = await User.findById(partnerId).select('firstName');\r\n\r\n        return NextResponse.json({\r\n            hasMatch: true,\r\n            matchId: match._id,\r\n            partnerName: partner?.firstName || 'Partner'\r\n        });\r\n\r\n    } catch (error) {\r\n        console.error('Check Match Error:', error);\r\n        return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,IAAI,GAAY;IAClC,IAAI;QACA,MAAM,IAAA,sHAAS;QACf,MAAM,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC;QAE/B,IAAI,CAAC,QAAQ;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACtE;QAEA,MAAM,QAAQ,MAAM,4HAAK,CAAC,OAAO,CAAC;YAC9B,KAAK;gBAAC;oBAAE,OAAO;gBAAO;gBAAG;oBAAE,OAAO;gBAAO;aAAE;YAC3C,QAAQ;QACZ;QAEA,IAAI,CAAC,OAAO;YACR,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,UAAU;YAAM;QAC/C;QAEA,MAAM,YAAY,MAAM,KAAK,CAAC,QAAQ,OAAO,SAAS,MAAM,KAAK,GAAG,MAAM,KAAK;QAC/E,MAAM,UAAU,MAAM,2HAAI,CAAC,QAAQ,CAAC,WAAW,MAAM,CAAC;QAEtD,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,UAAU;YACV,SAAS,MAAM,GAAG;YAClB,aAAa,SAAS,aAAa;QACvC;IAEJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ"}}]
}