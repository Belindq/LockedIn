{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rache/Desktop/Hackathons/LockedIn/lib/db.ts"],"sourcesContent":["import mongoose from 'mongoose';\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI;\r\n\r\nif (!MONGODB_URI) {\r\n    throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\r\n}\r\n\r\ninterface MongooseCache {\r\n    conn: typeof mongoose | null;\r\n    promise: Promise<typeof mongoose> | null;\r\n}\r\n\r\ndeclare global {\r\n    var mongoose: MongooseCache;\r\n}\r\n\r\nlet cached: MongooseCache = global.mongoose || { conn: null, promise: null };\r\n\r\nif (!global.mongoose) {\r\n    global.mongoose = cached;\r\n}\r\n\r\nasync function connectDB(): Promise<typeof mongoose> {\r\n    if (cached.conn) {\r\n        return cached.conn;\r\n    }\r\n\r\n    if (!cached.promise) {\r\n        const opts = {\r\n            bufferCommands: false,\r\n        };\r\n\r\n        cached.promise = mongoose.connect(MONGODB_URI!, opts).then((mongoose) => {\r\n            return mongoose;\r\n        });\r\n    }\r\n\r\n    try {\r\n        cached.conn = await cached.promise;\r\n    } catch (e) {\r\n        cached.promise = null;\r\n        throw e;\r\n    }\r\n\r\n    return cached.conn;\r\n}\r\n\r\nexport default connectDB;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IACd,MAAM,IAAI,MAAM;AACpB;AAWA,IAAI,SAAwB,OAAO,QAAQ,IAAI;IAAE,MAAM;IAAM,SAAS;AAAK;AAE3E,IAAI,CAAC,OAAO,QAAQ,EAAE;IAClB,OAAO,QAAQ,GAAG;AACtB;AAEA,eAAe;IACX,IAAI,OAAO,IAAI,EAAE;QACb,OAAO,OAAO,IAAI;IACtB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACjB,MAAM,OAAO;YACT,gBAAgB;QACpB;QAEA,OAAO,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,aAAc,MAAM,IAAI,CAAC,CAAC;YACxD,OAAO;QACX;IACJ;IAEA,IAAI;QACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACtC,EAAE,OAAO,GAAG;QACR,OAAO,OAAO,GAAG;QACjB,MAAM;IACV;IAEA,OAAO,OAAO,IAAI;AACtB;uCAEe"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rache/Desktop/Hackathons/LockedIn/models/User.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from 'mongoose';\r\n\r\nexport const GENDER_OPTIONS = ['male', 'female', 'non-binary', 'other', 'prefer_not_to_say'] as const;\r\nexport const SEXUALITY_OPTIONS = ['heterosexual', 'gay', 'lesbian', 'bisexual', 'pansexual', 'asexual', 'other', 'prefer_not_to_say'] as const;\r\n\r\nexport type Gender = typeof GENDER_OPTIONS[number];\r\nexport type Sexuality = typeof SEXUALITY_OPTIONS[number];\r\n\r\nexport interface IUser extends Document {\r\n    email: string;\r\n    passwordHash: string;\r\n    firstName?: string;\r\n    lastName?: string;\r\n    age?: number;\r\n    gender?: Gender;\r\n    sexuality?: Sexuality;\r\n    avatar?: string;\r\n    homeAddress?: string;\r\n    locationCoordinates?: {\r\n        lat: number;\r\n        lng: number;\r\n    };\r\n    interests: string;\r\n    values: string;\r\n    mustHaves: string;\r\n    niceToHaves: string;\r\n    dealBreakers: string;\r\n    status: 'onboarding' | 'waiting_for_match' | 'matched';\r\n    createdAt: Date;\r\n}\r\n\r\nconst UserSchema = new Schema<IUser>({\r\n    email: {\r\n        type: String,\r\n        required: true,\r\n        unique: true,\r\n        lowercase: true,\r\n        trim: true,\r\n        index: true\r\n    },\r\n    passwordHash: {\r\n        type: String,\r\n        required: true\r\n    },\r\n    firstName: {\r\n        type: String,\r\n        required: false\r\n    },\r\n    lastName: {\r\n        type: String,\r\n        required: false\r\n    },\r\n    age: {\r\n        type: Number,\r\n        required: false,\r\n        min: 18\r\n    },\r\n    avatar: {\r\n        type: String,\r\n        default: 'avatar1'\r\n    },\r\n    gender: {\r\n        type: String,\r\n        enum: GENDER_OPTIONS,\r\n        required: false\r\n    },\r\n    sexuality: {\r\n        type: String,\r\n        enum: SEXUALITY_OPTIONS,\r\n        required: false\r\n    },\r\n    homeAddress: {\r\n        type: String,\r\n        required: false\r\n    },\r\n    locationCoordinates: {\r\n        lat: {\r\n            type: Number,\r\n            required: false\r\n        },\r\n        lng: {\r\n            type: Number,\r\n            required: false\r\n        }\r\n    },\r\n    interests: {\r\n        type: String,\r\n        default: ''\r\n    },\r\n    values: {\r\n        type: String,\r\n        default: ''\r\n    },\r\n    mustHaves: {\r\n        type: String,\r\n        default: ''\r\n    },\r\n    niceToHaves: {\r\n        type: String,\r\n        default: ''\r\n    },\r\n    dealBreakers: {\r\n        type: String,\r\n        default: ''\r\n    },\r\n    status: {\r\n        type: String,\r\n        enum: ['onboarding', 'waiting_for_match', 'matched'],\r\n        default: 'onboarding',\r\n        required: true\r\n    },\r\n    createdAt: {\r\n        type: Date,\r\n        default: Date.now,\r\n        required: true\r\n    }\r\n});\r\n\r\n// Index for matching queries\r\nUserSchema.index({ status: 1 });\r\nUserSchema.index({ 'locationCoordinates.lat': 1, 'locationCoordinates.lng': 1 });\r\n\r\nconst User: Model<IUser> = mongoose.models.User || mongoose.model<IUser>('User', UserSchema);\r\n\r\nexport default User;\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,MAAM,iBAAiB;IAAC;IAAQ;IAAU;IAAc;IAAS;CAAoB;AACrF,MAAM,oBAAoB;IAAC;IAAgB;IAAO;IAAW;IAAY;IAAa;IAAW;IAAS;CAAoB;AA4BrI,MAAM,aAAa,IAAI,kKAAM,CAAQ;IACjC,OAAO;QACH,MAAM;QACN,UAAU;QACV,QAAQ;QACR,WAAW;QACX,MAAM;QACN,OAAO;IACX;IACA,cAAc;QACV,MAAM;QACN,UAAU;IACd;IACA,WAAW;QACP,MAAM;QACN,UAAU;IACd;IACA,UAAU;QACN,MAAM;QACN,UAAU;IACd;IACA,KAAK;QACD,MAAM;QACN,UAAU;QACV,KAAK;IACT;IACA,QAAQ;QACJ,MAAM;QACN,SAAS;IACb;IACA,QAAQ;QACJ,MAAM;QACN,MAAM;QACN,UAAU;IACd;IACA,WAAW;QACP,MAAM;QACN,MAAM;QACN,UAAU;IACd;IACA,aAAa;QACT,MAAM;QACN,UAAU;IACd;IACA,qBAAqB;QACjB,KAAK;YACD,MAAM;YACN,UAAU;QACd;QACA,KAAK;YACD,MAAM;YACN,UAAU;QACd;IACJ;IACA,WAAW;QACP,MAAM;QACN,SAAS;IACb;IACA,QAAQ;QACJ,MAAM;QACN,SAAS;IACb;IACA,WAAW;QACP,MAAM;QACN,SAAS;IACb;IACA,aAAa;QACT,MAAM;QACN,SAAS;IACb;IACA,cAAc;QACV,MAAM;QACN,SAAS;IACb;IACA,QAAQ;QACJ,MAAM;QACN,MAAM;YAAC;YAAc;YAAqB;SAAU;QACpD,SAAS;QACT,UAAU;IACd;IACA,WAAW;QACP,MAAM;QACN,SAAS,KAAK,GAAG;QACjB,UAAU;IACd;AACJ;AAEA,6BAA6B;AAC7B,WAAW,KAAK,CAAC;IAAE,QAAQ;AAAE;AAC7B,WAAW,KAAK,CAAC;IAAE,2BAA2B;IAAG,2BAA2B;AAAE;AAE9E,MAAM,OAAqB,mKAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,mKAAQ,CAAC,KAAK,CAAQ,QAAQ;uCAElE"}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rache/Desktop/Hackathons/LockedIn/app/api/admin/migrate-status/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport connectDB from '@/lib/db';\r\nimport User from '@/models/User';\r\n\r\nexport async function GET() {\r\n    try {\r\n        await connectDB();\r\n\r\n        // Use the native mongo collection to update to avoid mongoose validation\r\n        // in case the current schema doesn't match the old data perfectly or specific middleware interferes\r\n        // Although User model usage with updateMany is also fine, using updateMany on the model directly is safer for types if we cast partials\r\n\r\n        // However, since 'idle' is NOT in the status enum anymore, mongoose might drop it or complain if we fetch it.\r\n        // updateMany doesn't fetch, so it should be fine.\r\n\r\n        // We are looking for any string 'idle' in the status field\r\n        const result = await User.collection.updateMany(\r\n            { status: 'idle' },\r\n            { $set: { status: 'waiting_for_match' } }\r\n        );\r\n\r\n        return NextResponse.json({\r\n            success: true,\r\n            matchedCount: result.matchedCount,\r\n            modifiedCount: result.modifiedCount,\r\n            message: 'Migration completed successfully'\r\n        });\r\n    } catch (error: any) {\r\n        console.error('Migration error:', error);\r\n        return NextResponse.json({\r\n            success: false,\r\n            error: error.message\r\n        }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,IAAA,sHAAS;QAEf,yEAAyE;QACzE,oGAAoG;QACpG,wIAAwI;QAExI,8GAA8G;QAC9G,kDAAkD;QAElD,2DAA2D;QAC3D,MAAM,SAAS,MAAM,2HAAI,CAAC,UAAU,CAAC,UAAU,CAC3C;YAAE,QAAQ;QAAO,GACjB;YAAE,MAAM;gBAAE,QAAQ;YAAoB;QAAE;QAG5C,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT,cAAc,OAAO,YAAY;YACjC,eAAe,OAAO,aAAa;YACnC,SAAS;QACb;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,oBAAoB;QAClC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT,OAAO,MAAM,OAAO;QACxB,GAAG;YAAE,QAAQ;QAAI;IACrB;AACJ"}}]
}